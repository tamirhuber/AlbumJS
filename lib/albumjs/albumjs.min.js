function errorCheck(e){return!(!e.customize&&(preview="stack.single.collage.fader.shutter",-1==preview.indexOf(e.preview)))||(console.error("Preview option is not suitable"),!1)}function getPicName(e){for(;-1!=e.indexOf("/");)e=e.slice(e.indexOf("/")+1,e.length);return e=e.slice(0,e.lastIndexOf("."))}function popUpGallery(e,i,a,l){$("body").css("overflow","hidden"),album=$(e).parent(),$(".albumjs-thumbnail-selected").removeClass("albumjs-thumbnail-selected"),$("#albumjs-gallery-thumbnail").empty(),albumjs_current_index=l,$("#albumjs-overlay").prop("class",""),$("#albumjs-overlay").addClass("albumjs-"+i),$("#albumjs-overlay").fadeIn(),$("#albumjs-main-pic").attr("src",a),$("#albumjs-album-title").text($(album).attr("albumname")),len=$(album).children().length,loop=len+1;var n=1;for(l-3>0&&(n=l-3),n;n<=loop;n++)(n-1)%5==0&&($("#albumjs-gallery-thumbnail").append("</br>"),loop++),n<len+1&&(src=$(album).children("img:nth-child("+n+")").prop("src"),current_pic=pic,current_pic+=" src='"+src+"'>",$("#albumjs-gallery-thumbnail").append(current_pic)),$("#albumjs-gallery-thumbnail").children("img:nth-child("+n+")").bind("click",function(){$(this).hasClass("albumjs-thumbnail-selected")||($("#albumjs-overlay").animate({scrollTop:0},"slow"),margin_move=0,$(this).index()>=3&&(margin_move="-"+(20*($(this).index()-2)).toString()+"%"),$(this).index()>len-3&&(margin_move="-"+(20*(len-5)).toString()+"%"),$(this).index()<3&&(margin_move="0%"),$("#albumjs-main-pic").prop("src",$(this).prop("src")),$("#albumjs-gallery-thumbnail").children("img:nth-child(1)").animate({marginLeft:margin_move},300,"linear"),ismobile?($(".albumjs-thumbnail-selected").animate({width:"17%"},300,"linear",function(){}),$(this).animate({width:"18%"},300,"linear",function(){$(".albumjs-thumbnail-selected").removeClass("albumjs-thumbnail-selected"),$(this).addClass("albumjs-thumbnail-selected")})):($(".albumjs-thumbnail-selected").animate({width:"13%"},300,"linear",function(){}),$(this).animate({width:"14%"},300,"linear",function(){$(".albumjs-thumbnail-selected").removeClass("albumjs-thumbnail-selected"),$(this).addClass("albumjs-thumbnail-selected")})))}),n==l&&$("#albumjs-gallery-thumbnail").children("img:nth-child("+(n+1)+")").addClass("albumjs-thumbnail-selected"),albumjs_sources[n-1]=src;$("#albumjs-main-pic-prev").bind("click",function(){prevPic()}),$("#albumjs-main-pic-next").bind("click",function(){nextPic()})}function thumbnail(e){$(e).hasClass("albumjs-thumbnail-selected")||(margin_move=0,$(e).index()>=3&&(margin_move="-"+(20*($(e).index()-2)).toString()+"%"),$(e).index()>len-3&&(margin_move="-"+(20*(len-5)).toString()+"%"),$(e).index()<3&&(margin_move="0%"),$("#albumjs-main-pic").prop("src",$(e).prop("src")),$("#albumjs-gallery-thumbnail").children("img:nth-child(1)").animate({marginLeft:margin_move},300,"linear"),$(".albumjs-thumbnail-selected").animate({width:"13%"},300,"linear",function(){}),$(e).animate({width:"14%"},300,"linear",function(){$(".albumjs-thumbnail-selected").removeClass("albumjs-thumbnail-selected"),$(e).addClass("albumjs-thumbnail-selected")}))}function prevPic(){current_img_index=$(".albumjs-thumbnail-selected").index(),current_img_index>0&&$("#albumjs-gallery-thumbnail").children("img:nth-child("+current_img_index+")").click()}function nextPic(){current_img_index=$(".albumjs-thumbnail-selected").index(),current_img_index<albumjs_sources.length&&$("#albumjs-gallery-thumbnail").children("img:nth-child("+(current_img_index+2)+")").click()}function albumjsFader(e,i,a,l,n){function t(){var e;e=i.index()+1==a?i.closest(".fader").children("img").first():i.next(),i.fadeIn(n,function(){i.addClass("fader-front"),albumjs_timer=setTimeout(function(){albumjsFader(i,e,a,l,n)},l)})}e?(t(),e.fadeOut(n,function(){e.removeClass("fader-front")})):t()}!function(e){e.fn.albumjs=function(a){var l={preview:"stack",viewnum:3,theme:"dark",complete:null,albumwidth:"auto",grayscale:!0,customize:!1,general:!1,duration:3e3,transition:800};e("body").addClass("preload");var n=e.extend({},l,a);return e(window).load(function(){e("body").removeClass("preload")}),errorCheck(n)?(0==e("#albumjs-gallery").length&&(gallery="<div id='albumjs-gallery' class='albumjs-gallery'></div>",close_button="<button id='albumjs-gallery-close'> X </button>",main_pic="<img id='albumjs-main-pic' class='albumjs-gallery-img'>",overlay="<div id='albumjs-overlay' aria-hidden='true'> </div>",main_pic_cont="<div id='albumjs-main-pic-cont'></div>",prev="<span id='albumjs-main-pic-prev'><</span>",next="<span id='albumjs-main-pic-next'>></span>",album_title="<h1 id='albumjs-album-title'> </h1>",e("body").append(overlay),e("#albumjs-overlay").append(gallery),e("#albumjs-overlay").append(close_button),e("#albumjs-gallery-close").bind("click",function(){e("body").css("overflow","auto"),e("#albumjs-overlay").fadeOut()}),e("#albumjs-gallery").append(album_title),e("#albumjs-gallery").append(main_pic_cont),e("#albumjs-main-pic-cont").append(prev),e("#albumjs-main-pic-cont").append(next),e("#albumjs-main-pic-cont").append(main_pic),thumbnail="<div id='albumjs-gallery-thumbnail'> </div>",pic="<img class='albumjs-thumbnail-pic' ",e("#albumjs-gallery").append(thumbnail)),this.each(function(){for(album=e(this),pics_in_album=e(album).children().length,n.viewnum>5&&(n.viewnum=5),n.viewnum>pics_in_album&&(n.viewnum=pics_in_album),e(this).children("img").bind("click",function(){popUpGallery(e(this),n.theme,e(this).attr("src"),e(this).index()+1)}),i=1;i<=n.viewnum;i++)e(this).children("img:nth-child("+i+")").attr("title",getPicName(e(this).children("img:nth-child("+i+")").prop("src"))),e(this).children("img:nth-child("+i+")").addClass("album-view"),e(this).children("img:nth-child("+i+")").css("transition",n.transition+"ms");if("auto"!=n.albumwidth&&e(this).css("width",n.albumwidth),n.viewnum>1?1==n.general?e(this).addClass(n.preview):e(this).addClass(n.preview+"-"+n.viewnum):e(this).addClass("single-view"),n.grayscale&&e(this).children().addClass("preview-grayscale"),/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){ismobile=!0;var a=e(album).children("img:nth-child(1)"),l=e(album).children("img:nth-child("+n.viewnum+")"),t=(e(a).height()+e(l).height())/2,s=e(a).offset().top-e(l).offset().top;e(album).css("height",t+s+5+"px")}(n.preview="fader")&&albumjsFader(null,e("."+n.preview).children().first(),n.viewnum,n.duration,n.transition)})):(console.error("Error in AlbumJS options"),null)}}(jQuery);var albumjs_sources=[],albumjs_current_index,ismobile=!1;$(document).keyup(function(e){27==e.keyCode&&(e.preventDefault(),e.stopImmediatePropagation(),$("#albumjs-overlay").fadeOut()),37==e.keyCode&&(e.preventDefault(),e.stopImmediatePropagation(),prevPic()),39==e.keyCode&&(e.preventDefault(),e.stopImmediatePropagation(),nextPic()),65==e.keyCode&&vbvb.pause(),83==e.keyCode&&vbvb.resume()});